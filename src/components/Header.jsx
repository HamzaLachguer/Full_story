import { useEffect, useState } from "react";

const NAV_ITEMS = [
  { label: "World", href: "/world" },
  { label: "U.S.", href: "/us" },
  { label: "Business", href: "/business" },
  { label: "Politics", href: "/politics" },
  { label: "Economy", href: "/economy" },
  { label: "Finance", href: "/finance" },
  { label: "Health", href: "/health" },
  { label: "Tech", href: "/tech" },
  { label: "Sports", href: "/sports" },
];

const Header = () => {
  const [isMenuOpen, setIsMenuOpen] = useState(false);

  useEffect(() => {
    if (!isMenuOpen) {
      return;
    }

    const handleKeyDown = (e) => {
      if (e.key === "Escape") {
        setIsMenuOpen(false)
      }
    }

    document.addEventListener("keydown", handleKeyDown);
    return () => document.removeEventListener("keydown", handleKeyDown);

  }, [isMenuOpen])

  return (
    <header className={`fixed top-0 w-full bg-secondary px-4 md:px-6 lg:px-15 text-white flex items-start transition-all duration-300 ${ isMenuOpen ? "h-screen lg:h-16" : "h-16 overflow-hidden" }`}>

      <a 
        href="/" 
        className="bg-primary h-21.25 w-21.25 grid place-items-center fixed top-0"
        aria-label="go home page"
        >
        <svg viewBox="0 0 56 42" height={60} width={60} id="svg12423302989"><path d="M 13.913 18.814 L 17.124 18.814 L 17.124 7.795 L 19.911 7.795 L 19.911 5.324 L 17.124 5.324 L 17.124 4.274 C 17.088 3.832 17.216 3.393 17.484 3.039 C 17.818 2.724 18.271 2.567 18.729 2.606 C 18.963 2.606 19.196 2.627 19.426 2.668 C 19.625 2.668 19.799 2.755 19.936 2.804 L 20.571 0.334 C 20.257 0.233 19.937 0.155 19.612 0.099 C 19.132 0.018 18.644 -0.015 18.156 0 C 17.419 -0.011 16.687 0.141 16.016 0.445 C 15.379 0.734 14.846 1.208 14.485 1.804 C 14.078 2.486 13.879 3.271 13.913 4.064 L 13.913 5.299 L 11.909 5.299 L 11.909 7.77 L 13.913 7.77 Z M 23.371 18.394 C 24.086 18.8 24.899 19.005 25.723 18.986 C 26.635 19.019 27.536 18.769 28.299 18.27 C 28.997 17.822 29.543 17.177 29.867 16.417 L 30.004 16.417 L 30.004 18.814 L 33.115 18.814 L 33.115 5.336 L 29.867 5.336 L 29.867 13.144 C 29.878 13.734 29.723 14.316 29.419 14.824 C 29.154 15.258 28.776 15.612 28.324 15.849 C 27.902 16.071 27.432 16.19 26.955 16.195 C 26.256 16.209 25.583 15.931 25.1 15.429 C 24.605 14.872 24.35 14.144 24.391 13.403 L 24.391 5.336 L 21.156 5.336 L 21.156 13.909 C 21.13 14.859 21.326 15.802 21.728 16.664 C 22.091 17.389 22.663 17.991 23.371 18.394 Z M 35.093 0.84 L 38.292 0.84 L 38.292 18.814 L 35.093 18.814 Z M 40.332 0.84 L 43.531 0.84 L 43.531 18.814 L 40.332 18.814 Z M 7.803 29.264 L 5.488 28.782 C 4.958 28.684 4.453 28.478 4.007 28.177 C 3.702 27.937 3.538 27.561 3.572 27.176 C 3.566 26.71 3.826 26.279 4.244 26.065 C 4.746 25.764 5.325 25.614 5.911 25.632 C 6.338 25.625 6.761 25.705 7.156 25.867 C 7.473 26.014 7.754 26.229 7.977 26.497 C 8.173 26.741 8.317 27.023 8.4 27.325 L 11.324 27.004 C 11.13 25.91 10.52 24.932 9.62 24.274 C 8.515 23.551 7.208 23.196 5.886 23.261 C 4.904 23.243 3.928 23.415 3.012 23.767 C 2.242 24.066 1.57 24.571 1.07 25.225 C 0.598 25.845 0.356 26.609 0.386 27.386 C 0.331 28.302 0.665 29.198 1.307 29.857 C 2.111 30.587 3.116 31.065 4.194 31.228 L 6.508 31.71 C 7.014 31.787 7.493 31.986 7.902 32.291 C 8.182 32.528 8.341 32.876 8.338 33.242 C 8.33 33.718 8.07 34.155 7.653 34.391 C 7.1 34.725 6.459 34.889 5.812 34.86 C 5.18 34.886 4.556 34.723 4.02 34.391 C 3.551 34.068 3.229 33.576 3.124 33.019 L 0 33.279 C 0.159 34.46 0.821 35.517 1.817 36.182 C 3.015 36.924 4.413 37.286 5.824 37.219 C 6.854 37.235 7.877 37.051 8.836 36.676 C 9.64 36.359 10.344 35.834 10.876 35.156 C 11.364 34.512 11.626 33.727 11.623 32.921 C 11.649 32.042 11.306 31.192 10.677 30.574 C 9.852 29.893 8.861 29.441 7.803 29.264 Z M 19.127 34.415 C 18.941 34.435 18.753 34.435 18.567 34.415 C 18.321 34.413 18.078 34.372 17.845 34.292 C 17.623 34.204 17.438 34.043 17.323 33.835 C 17.171 33.528 17.103 33.187 17.124 32.846 L 17.124 25.941 L 19.799 25.941 L 19.799 23.471 L 17.124 23.471 L 17.124 20.246 L 13.925 20.246 L 13.925 23.471 L 11.996 23.471 L 11.996 25.941 L 13.925 25.941 L 13.925 33.439 C 13.887 34.179 14.078 34.911 14.473 35.539 C 14.845 36.096 15.379 36.527 16.004 36.775 C 16.692 37.045 17.43 37.167 18.169 37.133 C 18.554 37.13 18.937 37.089 19.314 37.009 C 19.561 36.96 19.807 36.898 20.048 36.824 L 19.513 34.354 Z M 30.464 24.175 C 29.418 23.573 28.225 23.27 27.017 23.298 C 25.808 23.268 24.615 23.572 23.57 24.175 C 22.59 24.763 21.803 25.621 21.305 26.645 C 20.744 27.8 20.471 29.07 20.508 30.351 C 20.47 31.632 20.743 32.903 21.305 34.057 C 21.802 35.082 22.589 35.94 23.57 36.528 C 24.615 37.13 25.808 37.434 27.017 37.405 C 28.225 37.433 29.418 37.129 30.464 36.528 C 31.442 35.94 32.225 35.081 32.716 34.057 C 33.278 32.903 33.551 31.632 33.513 30.351 C 33.55 29.07 33.277 27.8 32.716 26.645 C 32.223 25.622 31.44 24.764 30.464 24.175 Z M 29.867 32.488 C 29.662 33.109 29.287 33.661 28.784 34.082 C 28.273 34.487 27.633 34.697 26.98 34.675 C 26.318 34.699 25.67 34.489 25.15 34.082 C 24.647 33.658 24.269 33.108 24.055 32.488 C 23.813 31.772 23.695 31.02 23.707 30.265 C 23.694 29.501 23.812 28.741 24.055 28.016 C 24.27 27.394 24.648 26.84 25.15 26.411 C 25.67 26.004 26.318 25.793 26.98 25.818 C 27.633 25.795 28.273 26.005 28.784 26.411 C 29.285 26.839 29.659 27.394 29.867 28.016 C 30.114 28.74 30.236 29.5 30.228 30.265 C 30.235 31.021 30.113 31.773 29.867 32.488 Z M 41.577 23.285 C 40.835 23.273 40.108 23.494 39.499 23.915 C 38.894 24.363 38.457 24.998 38.254 25.719 L 38.08 25.719 L 38.08 23.471 L 34.981 23.471 L 34.981 36.935 L 38.18 36.935 L 38.18 29.029 C 38.172 28.497 38.31 27.972 38.578 27.51 C 38.839 27.073 39.219 26.718 39.673 26.485 C 40.156 26.232 40.695 26.105 41.241 26.114 C 41.519 26.096 41.797 26.096 42.075 26.114 C 42.295 26.136 42.512 26.182 42.722 26.25 L 42.722 23.372 L 42.174 23.31 C 41.976 23.29 41.776 23.282 41.577 23.285 Z M 52.752 23.471 L 49.616 33.637 L 49.479 33.637 L 46.343 23.471 L 42.946 23.471 L 47.924 37.219 L 47.65 37.948 C 47.51 38.368 47.266 38.746 46.94 39.048 C 46.66 39.257 46.321 39.374 45.97 39.381 C 45.548 39.374 45.129 39.308 44.725 39.184 L 43.979 41.654 C 44.265 41.758 44.561 41.832 44.862 41.876 C 45.251 41.956 45.647 41.997 46.044 42 C 46.787 42.018 47.525 41.879 48.21 41.592 C 48.809 41.303 49.333 40.88 49.74 40.357 C 50.174 39.806 50.514 39.188 50.748 38.529 L 56.162 23.471 Z" fill="white"></path></svg>
      </a>

      <div className="lg:pl-29.25 capitalize flex justify-end items-center h-16 w-full relative">

        {/* Primary navigation */}
        <nav
          id="primary-navigation"
          className={`
            absolute top-31 w-full left-0 pr-6 font-medium
            lg:static lg:block
            ${ isMenuOpen ? "block" : "hidden lg:block"}
          `}
          aria-label="Primary navigation"
        >
          <ul className="text-lg px-2 lg:px-0 lg:text-sm flex items-start gap-6 flex-col lg:flex-row lg:text-center">

            { NAV_ITEMS.map(item => (
              <li key={item.href}><a href={item.href}>{item.label}</a></li>
            )) }

          </ul>
        </nav>

        <button 
          className="hidden lg:flex h-8.75 cursor-pointer"
          aria-label="search button"
          type="button"
        >
          <span className="text-xs flex items-center bg-[#cbd5e166] w-53.75 pl-4">Search...</span>
          <span className="h-8.75 w-8.75 bg-primary grid place-items-center text-xl"><i className="ri-search-line" aria-hidden="true" /></span>
        </button>

        <button 
          className="flex flex-col justify-center items-center gap-2 h-7.5 w-7.5 lg:hidden cursor-pointer relative"
          aria-expanded={ isMenuOpen }
          aria-controls="primary-navigation"
          aria-label={ isMenuOpen? "close menu" : "open menu"}
          onClick={() => setIsMenuOpen(!isMenuOpen)}
        >
          <div className={`h-0.5 w-6 bg-white transition-all duration-300 ${ isMenuOpen? "absolute rotate-45" : ""}`}></div>
          <div className={`h-0.5 w-6 bg-white transition-all duration-300 ${ isMenuOpen? "absolute -rotate-45" : ""}`}></div>
        </button>
      </div>
    </header>
  )
}

export default Header;